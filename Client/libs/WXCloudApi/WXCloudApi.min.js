function assertWXPlatform(t){return"undefined"==typeof egret.Capabilities||egret.Capabilities.runtimeType!==egret.RuntimeType.WXGAME?(t?console.warn(t+"只在微信小游戏下可用"):console.warn("该接口只在微信小游戏下可用"),!1):!0}var __reflect=this&&this.__reflect||function(t,e,r){t.__class__=e,r?r.push(e):r=[e],t.__types__=t.__types__?r.concat(t.__types__):r},__extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);r.prototype=e.prototype,t.prototype=new r},egret;!function(t){var e=function(){function e(){}return e.openCollection=function(t,r){var o=new e;return o._env=r,o.init(t),o},e.prototype.startWatch=function(t,e){var o=this._collection.where(t).watch(e);return new r(o)},e.prototype.stopWatch=function(t){t.close()},e.prototype.init=function(e){var r,o=this._env;r=o?t.wxCloud.cloud.database({env:o}):t.wxCloud.cloud.database(),this._collection=r.collection(e)},e}();t.WXDBWatcher=e,__reflect(e.prototype,"egret.WXDBWatcher");var r=function(){function t(t){this._listener=t}return t.prototype.close=function(){this._listener.close()},t}();t.WXDBListener=r,__reflect(r.prototype,"egret.WXDBListener")}(egret||(egret={}));var egret;!function(t){var e;!function(t){var e=function(){function t(){}return t.init=function(t){assertWXPlatform("egret.wxCloud.cloud")&&wx.cloud.init(t)},t.database=function(t){return assertWXPlatform("egret.wxCloud.cloud")?wx.cloud.database(t):new EgretDatabase(t,void 0)},t.callFunction=function(t){return assertWXPlatform("egret.wxCloud.cloud")?wx.cloud.callFunction(t):void 0},t}();t.cloud=e,__reflect(e.prototype,"egret.wxCloud.cloud")}(e=t.wxCloud||(t.wxCloud={}))}(egret||(egret={}));var EgretDatabase=function(){function t(t,e){this._config=t,this._db=e}return Object.defineProperty(t.prototype,"config",{get:function(){return this._db?this._db.config:(assertWXPlatform("egret.wxCloud.DB.Database"),this._config)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"command",{get:function(){return this._db?this._db.command:(assertWXPlatform("egret.wxCloud.DB.Database"),new EgretDatabaseCommand)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Geo",{get:function(){return this._db?this._db.Geo:(assertWXPlatform("egret.wxCloud.DB.Database"),new EgretGeo)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverDate",{get:function(){return this._db?this._db.serverDate:(assertWXPlatform("egret.wxCloud.DB.Database"),function(){return{options:{offset:0}}})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"RegExp",{get:function(){return this._db?this._db.RegExp:(assertWXPlatform("egret.wxCloud.DB.Database"),EgretRegExp)},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return this._db?this._db.collection(t):(assertWXPlatform("egret.wxCloud.DB.Database"),new EgretCollectionReference("",void 0))},t}();__reflect(EgretDatabase.prototype,"EgretDatabase");var EgretQuery=function(){function t(){}return t.prototype.where=function(t){return assertWXPlatform("egret.wxCloud.DB.Query"),this},t.prototype.orderBy=function(t,e){return assertWXPlatform("egret.wxCloud.DB.Query"),this},t.prototype.limit=function(t){return assertWXPlatform("egret.wxCloud.DB.Query"),this},t.prototype.skip=function(t){return assertWXPlatform("egret.wxCloud.DB.Query"),this},t.prototype.field=function(t){return assertWXPlatform("egret.wxCloud.DB.Query"),this},t.prototype.get=function(t){return assertWXPlatform("egret.wxCloud.DB.Query"),Promise.resolve({data:[],errMsg:""})},t.prototype.count=function(t){return assertWXPlatform("egret.wxCloud.DB.Query"),Promise.resolve({total:0,errMsg:""})},t.prototype.watch=function(t){assertWXPlatform("egret.wxCloud.DB.Query")},t}();__reflect(EgretQuery.prototype,"EgretQuery");var EgretCollectionReference=function(t){function e(e,r){var o=t.call(this)||this;return o.collectionName=e,o.database=r,o}return __extends(e,t),e.prototype.doc=function(t){return assertWXPlatform("egret.wxCloud.DB.CollectionReference"),new EgretDocumentReference(t,this.database)},e.prototype.add=function(t){return assertWXPlatform("egret.wxCloud.DB.CollectionReference"),Promise.resolve({_id:"",errMsg:""})},e}(EgretQuery);__reflect(EgretCollectionReference.prototype,"EgretCollectionReference");var EgretDocumentReference=function(){function t(t,e){this.docId=t,this.database=e}return t.prototype.field=function(t){return assertWXPlatform("egret.wxCloud.DB.DocumentReference"),this},t.prototype.get=function(t){return assertWXPlatform("egret.wxCloud.DB.DocumentReference"),Promise.resolve({data:[],errMsg:""})},t.prototype.set=function(t){return assertWXPlatform("egret.wxCloud.DB.DocumentReference"),Promise.resolve({_id:this.docId,stats:{updated:0,created:0},errMsg:""})},t.prototype.update=function(t){return assertWXPlatform("egret.wxCloud.DB.DocumentReference"),Promise.resolve({stats:{updated:0},errMsg:""})},t.prototype.remove=function(t){return assertWXPlatform("egret.wxCloud.DB.DocumentReference"),Promise.resolve({stats:{removed:0},errMsg:""})},t}();__reflect(EgretDocumentReference.prototype,"EgretDocumentReference");var EgretDatabaseCommand=function(){function t(){}return t.prototype.eq=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseCommand"),new EgretDatabaseQueryCommand},t.prototype.neq=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseCommand"),new EgretDatabaseQueryCommand},t.prototype.gt=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseCommand"),new EgretDatabaseQueryCommand},t.prototype.gte=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseCommand"),new EgretDatabaseQueryCommand},t.prototype.lt=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseCommand"),new EgretDatabaseQueryCommand},t.prototype.lte=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseCommand"),new EgretDatabaseQueryCommand},t.prototype["in"]=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseCommand"),new EgretDatabaseQueryCommand},t.prototype.nin=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseCommand"),new EgretDatabaseQueryCommand},t.prototype.geoNear=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseCommand"),new EgretDatabaseQueryCommand},t.prototype.geoWithin=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseCommand"),new EgretDatabaseQueryCommand},t.prototype.geoIntersects=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseCommand"),new EgretDatabaseQueryCommand},t.prototype.and=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return assertWXPlatform("egret.wxCloud.DB.DatabaseCommand"),new EgretDatabaseLogicCommand},t.prototype.or=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return assertWXPlatform("egret.wxCloud.DB.DatabaseCommand"),new EgretDatabaseLogicCommand},t.prototype.set=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseCommand"),new DatabaseUpdateCommand("",[])},t.prototype.remove=function(){return assertWXPlatform("egret.wxCloud.DB.DatabaseCommand"),new DatabaseUpdateCommand("",[])},t.prototype.inc=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseCommand"),new DatabaseUpdateCommand("",[])},t.prototype.mul=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseCommand"),new DatabaseUpdateCommand("",[])},t.prototype.push=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return assertWXPlatform("egret.wxCloud.DB.DatabaseCommand"),new DatabaseUpdateCommand("",[])},t.prototype.pop=function(){return assertWXPlatform("egret.wxCloud.DB.DatabaseCommand"),new DatabaseUpdateCommand("",[])},t.prototype.shift=function(){return assertWXPlatform("egret.wxCloud.DB.DatabaseCommand"),new DatabaseUpdateCommand("",[])},t.prototype.unshift=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return assertWXPlatform("egret.wxCloud.DB.DatabaseCommand"),new DatabaseUpdateCommand("",[])},t}();__reflect(EgretDatabaseCommand.prototype,"EgretDatabaseCommand");var EgretDatabaseLogicCommand=function(){function t(){}return t.prototype._setFieldName=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseLogicCommand"),this.fieldName=t,this},t.prototype.and=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return assertWXPlatform("egret.wxCloud.DB.DatabaseLogicCommand"),this},t.prototype.or=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return assertWXPlatform("egret.wxCloud.DB.DatabaseLogicCommand"),this},t}();__reflect(EgretDatabaseLogicCommand.prototype,"EgretDatabaseLogicCommand");var EgretDatabaseQueryCommand=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype._setFieldName=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseQueryCommand"),this.fieldName=t,this},e.prototype.eq=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseQueryCommand"),this},e.prototype.neq=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseQueryCommand"),this},e.prototype.gt=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseQueryCommand"),this},e.prototype.gte=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseQueryCommand"),this},e.prototype.lt=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseQueryCommand"),this},e.prototype.lte=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseQueryCommand"),this},e.prototype["in"]=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseQueryCommand"),this},e.prototype.nin=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseQueryCommand"),this},e.prototype.geoNear=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseQueryCommand"),this},e.prototype.geoWithin=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseQueryCommand"),this},e.prototype.geoIntersects=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseQueryCommand"),this},e}(EgretDatabaseLogicCommand);__reflect(EgretDatabaseQueryCommand.prototype,"EgretDatabaseQueryCommand");var DatabaseUpdateCommand=function(){function t(t,e,r){this.operator=t,this.operands=e,this.fieldName=r}return t.prototype._setFieldName=function(t){return assertWXPlatform("egret.wxCloud.DB.DatabaseUpdateCommand"),this.fieldName=t,this},t}();__reflect(DatabaseUpdateCommand.prototype,"DatabaseUpdateCommand");var EgretGeo=function(){function t(){this.Point=EgretGeoPoint,this.MultiPoint=EgretGeoMultiPoint,this.LineString=EgretGeoLineString,this.MultiLineString=EgretGeoMultiLineString,this.Polygon=EgretGeoPolygon,this.MultiPolygon=EgretGeoMultiPolygon}return t}();__reflect(EgretGeo.prototype,"EgretGeo",["egret.wxCloud.DB.IGeo"]);var EgretGeoPoint=function(){function t(t,e){this.longitude=t,this.latitude=e}return t.prototype.toJSON=function(){return assertWXPlatform("egret.wxCloud.DB.GeoPoint"),{}},t.prototype.toString=function(){return assertWXPlatform("egret.wxCloud.DB.GeoPoint"),""},t}();__reflect(EgretGeoPoint.prototype,"EgretGeoPoint");var EgretGeoMultiPoint=function(){function t(t){this.points=t}return t.prototype.toJSON=function(){return assertWXPlatform("egret.wxCloud.DB.GeoMultiPoint"),{type:"MultiPoint",coordinates:[]}},t.prototype.toString=function(){return assertWXPlatform("egret.wxCloud.DB.GeoMultiPoint"),""},t}();__reflect(EgretGeoMultiPoint.prototype,"EgretGeoMultiPoint");var EgretGeoLineString=function(){function t(t){this.points=t}return t.prototype.toJSON=function(){return assertWXPlatform("egret.wxCloud.DB.GeoLineString"),{type:"LineString",coordinates:[]}},t.prototype.toString=function(){return assertWXPlatform("egret.wxCloud.DB.GeoLineString"),""},t}();__reflect(EgretGeoLineString.prototype,"EgretGeoLineString");var EgretGeoMultiLineString=function(){function t(t){this.lines=t}return t.prototype.toJSON=function(){return assertWXPlatform("egret.wxCloud.DB.GeoMultiLineString"),{type:"GeoMultiLineString",coordinates:[]}},t.prototype.toString=function(){return assertWXPlatform("egret.wxCloud.DB.GeoMultiLineString"),""},t}();__reflect(EgretGeoMultiLineString.prototype,"EgretGeoMultiLineString");var EgretGeoPolygon=function(){function t(t){this.lines=t}return t.prototype.toJSON=function(){return assertWXPlatform("egret.wxCloud.DB.GeoPolygon"),{type:"Polygon",coordinates:[]}},t.prototype.toString=function(){return assertWXPlatform("egret.wxCloud.DB.GeoPolygon"),""},t}();__reflect(EgretGeoPolygon.prototype,"EgretGeoPolygon");var EgretGeoMultiPolygon=function(){function t(t){this.polygons=t}return t.prototype.toJSON=function(){return assertWXPlatform("egret.wxCloud.DB.MultiPolygon"),{type:"MultiPolygon",coordinates:[]}},t.prototype.toString=function(){return assertWXPlatform("egret.wxCloud.DB.MultiPolygon"),""},t}();__reflect(EgretGeoMultiPolygon.prototype,"EgretGeoMultiPolygon");var EgretRegExp=function(){function t(t){}return Object.defineProperty(t.prototype,"regexp",{get:function(){return assertWXPlatform("egret.wxCloud.DB.RegExp"),""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return assertWXPlatform("egret.wxCloud.DB.RegExp"),""},enumerable:!0,configurable:!0}),t}();__reflect(EgretRegExp.prototype,"EgretRegExp");